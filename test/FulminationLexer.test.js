import { describe, expect, test, } from '@jest/globals';
import HighLight from '~/class/HighLight';
import FulminationLexer from '~/class/FulminationLexer';

describe('[class] Fulmination Lexer;', () => {
  test('FulminationLexer parsing of composite types should be correct.', () => {
    const highLight = new HighLight();
    highLight.addLexer(FulminationLexer);
    expect(JSON.stringify(highLight.parse(`
      (+) bold; red; underline: demo text1 (+) bold; green; underline: demo text2 &
      (+) dim: demo text3

      [+] bold; gray; underline; dim:
        | This is example text is explain ctf,
        | "+" that is mean add a new text or passage.
        | bold, red and so on is text or passage formate.
    `))).toMatch('[{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"bold\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"red\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"underline\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"demo\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"text1\"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"bold\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"green\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"underline\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"demo\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"text2\"},{\"type\":\" \"},{\"type\":\"and\",\"elem\":\"&\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"dim\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"demo\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"text3\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"squareParenthese\",\"elem\":\"[\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"squareParenthese\",\"elem\":\"]\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"bold\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"gray\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"underline\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"dim\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"line\",\"elem\":\"|\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"This\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"is\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"example\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"text\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"is\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"explain\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"ctf,\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"line\",\"elem\":\"|\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"\\\"+\\\"\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"that\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"is\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"mean\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"add\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"a\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"new\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"text\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"or\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"passage.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"line\",\"elem\":\"|\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"bold,\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"red\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"and\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"so\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"on\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"is\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"text\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"or\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"passage\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"formate.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"}]');
  });

  test('Fulmination Lexer parsing spaces should be correct.', () => {
    const highLight = new HighLight();
    highLight.addLexer(FulminationLexer);
    expect(JSON.stringify(highLight.parse('(+) bold: GitHub (+) dim: * github (+) bgWhite: * is.'))).toMatch('[{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"bold\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"GitHub\"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"dim\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"asterick\",\"elem\":\"*\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"github\"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"bgWhite\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"asterick\",\"elem\":\"*\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"is.\"}]');
  });

  test('Fulmination Lexer should be able to handle specials symbols.', () => {
    const highLight = new HighLight();
    highLight.addLexer(FulminationLexer);
    expect(JSON.stringify(highLight.parse('(+) green; bold: ** └─ (+) : * | (+) : *'))).toMatch('[{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"green\"},{\"type\":\"semicolon\",\"elem\":\";\"},{\"type\":\" \"},{\"type\":\"format\",\"elem\":\"bold\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"asterick\",\"elem\":\"*\"},{\"type\":\"asterick\",\"elem\":\"*\"},{\"type\":\" \"},{\"type\":\"text\",\"elem\":\"└─\"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"asterick\",\"elem\":\"*\"},{\"type\":\" \"},{\"type\":\"line\",\"elem\":\"|\"},{\"type\":\" \"},{\"type\":\"parenthese\",\"elem\":\"(\"},{\"type\":\"plus\",\"elem\":\"+\"},{\"type\":\"parenthese\",\"elem\":\")\"},{\"type\":\" \"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"asterick\",\"elem\":\"*\"}]');
  });
});
