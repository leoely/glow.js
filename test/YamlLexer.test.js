import { describe, expect, test, } from '@jest/globals';
import HighLight from '~/class/HighLight';
import YamlLexer from '~/class/YamlLexer';
import LocationLexer from '~/class/LocationLexer';
import DripPackageLexer from '~/class/DripPackageLexer';

describe('[class] YamlLexer', () => {
  test('YamlLexer parse result should be correct.', () => {
    const highLight = new HighLight();
    highLight.addLexer(YamlLexer);
    highLight.addLexer(LocationLexer);
    highLight.addLexer(DripPackageLexer);
    expect(JSON.stringify(highLight.parse(`
    " Minimum time interval which ignores a serails of same file update.
    interval: 5000(ms)

    " Stop add new task when current memory less than minimum memory.
    min-mem: 100(mb)

    " Increase or decrease core number which base recommended value.
    adjust-core: 0(core)

    " File or path which will ignores by file watch.
    ignores:
      - .drip/local/
      - .git/
      - .gitkeep

    " Alias and address of package which will be installed in this project.
    packages:
      - [node](/User/user/node/.git)

    " Level of instance index which affect both index time and index effect.
    index-level: 2(rank)
    `))).toMatch('[{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"Minimum\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"time\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"interval\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"ignores\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"a\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"serails\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"of\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"same\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"file\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"update.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"interval\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\"5000\"},{\"type\":\"unit\",\"elem\":\"(ms)\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"Stop\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"add\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"new\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"task\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"when\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"current\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"memory\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"less\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"than\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"minimum\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"memory.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"min-mem\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\"100\"},{\"type\":\"unit\",\"elem\":\"(mb)\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"Increase\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"or\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"decrease\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"core\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"number\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"base\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"recommended\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"value.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"adjust-core\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\"0\"},{\"type\":\"unit\",\"elem\":\"(core)\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"File\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"or\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"path\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"will\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"ignores\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"by\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"file\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"watch.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"ignores\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"dash\",\"elem\":\"-\"},{\"type\":\" \"},{\"type\":\"hiddenDirectory\",\"elem\":\".drip\"},{\"type\":\"slash\",\"elem\":\"/\"},{\"type\":\"namespace\",\"elem\":\"local\"},{\"type\":\"slash\",\"elem\":\"/\"},{\"type\":\"namespace\",\"elem\":\"\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"dash\",\"elem\":\"-\"},{\"type\":\" \"},{\"type\":\"hiddenDirectory\",\"elem\":\".git\"},{\"type\":\"slash\",\"elem\":\"/\"},{\"type\":\"namespace\",\"elem\":\"\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"dash\",\"elem\":\"-\"},{\"type\":\" \"},{\"type\":\"hiddenDirectory\",\"elem\":\".gitkeep\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"Alias\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"and\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"address\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"of\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"package\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"will\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"be\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"installed\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"in\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"this\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"project.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"packages\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"dash\",\"elem\":\"-\"},{\"type\":\" \"},{\"type\":\"squareBracket\",\"elem\":\"[\"},{\"type\":\"name\",\"elem\":\"node\"},{\"type\":\"squareBracket\",\"elem\":\"]\"},{\"type\":\"bracket\",\"elem\":\"(\"},{\"type\":\"address\",\"elem\":\"/User/user/node/.git\"},{\"type\":\"bracket\",\"elem\":\")\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"Level\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"of\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"instance\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"index\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"affect\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"both\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"index\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"time\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"and\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"index\"},{\"type\":\" \"},{\"type\":\"notes\",\"elem\":\"effect.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"index-level\"},{\"type\":\"colon\",\"elem\":\":\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\"2\"},{\"type\":\"unit\",\"elem\":\"(rank)\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"}]');
  });
});
